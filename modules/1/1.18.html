<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Technologies Tutorial</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dark-mode.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
<style>
        /* Added CSS for sidebar */
        .sidebar {
            height: 100vh; /* Full viewport height */
            overflow-y: auto; /* Enable vertical scrolling if content overflows */
        }
    </style>
</head>
<body class="">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="index.html"><img src="mainlogo.png" height="50" alt="Logo"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="../../index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../syllabus.html">Syllabus</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../download_material.html">Download Material</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../playground.html">Playground</a></li>
                </ul>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="darkModeToggle">
                    <label class="form-check-label" for="darkModeToggle">Dark Mode</label>
                </div>
            </div>
        </div>
    </nav>


    <!--Ediatable section starts-->


    <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
   
    <a href="1.1.html">Fundamentals of HTML</a>
    <a href="1.2.html">Working with Text</a>
    <a href="1.3.html">Organizing Text in HTML</a>
    <a href="1.4.html">Working with Links and URLs</a>
    <a href="1.5.html">Creating Tables</a>
    <a href="1.6.html">Working with Images</a>
    <a href="1.7.html">Canvas</a>
    <a href="1.8.html">Forms</a>
    <a href="1.9.html">Frames and Multimedia</a>
    <a href="1.10.html">HTML5 Document Structure</a>
    <a href="1.11.html">Creating Editable Content</a>
    <a href="1.12.html">Checking Spelling Mistakes</a>
    <a href="1.13.html">Exploring Custom Data Attributes</a>
    <a href="1.14.html">Client-Side Storage</a>
    <a href="1.15.html">Drag and Drop Feature</a>
    <a href="1.16.html">Offline Web Applications</a>
    <a href="1.17.html">Web Communications</a>
    <a href="1.18.html">Cross-Document Messaging and Desktop Notifications</a>

</div>

    <!-- Main Content -->
<div class="main-content">
<!-- Main Content Section -->
<main class="container mt-5">
    <h1 class="text-center mb-5">Cross-Document Messaging and Desktop Notifications in HTML5</h1>

    <!-- Cross-Document Messaging Section -->
    <section class="mb-5">
        <h2>Cross-Document Messaging</h2>
        <p>Cross-document messaging, also known as <strong>postMessage</strong>, is a feature in HTML5 that allows secure communication between different documents or windows, even if they originate from different domains. This is especially useful for embedding iframes, pop-ups, and widgets that need to communicate with the parent document.</p>

        <h3>How Cross-Document Messaging Works</h3>
        <p>The <code>postMessage</code> method allows a document to send messages to another window, which can then be processed by an <code>onmessage</code> event listener in the receiving window.</p>

        <h4>Sending a Message with postMessage</h4>
        <p>To send a message to another document, use the <code>postMessage</code> method:</p>
        <pre>
const iframe = document.getElementById("myIframe");
iframe.contentWindow.postMessage("Hello from the parent window!", "https://example.com");
        </pre>
        <p>This example sends a message ("Hello from the parent window!") to an iframe loaded from <code>https://example.com</code>. Note that specifying the target origin is essential for security, ensuring the message is only sent to the intended recipient.</p>

        <h4>Receiving a Message with onmessage</h4>
        <p>To receive and handle messages, use the <code>onmessage</code> event in the target window:</p>
        <pre>
window.addEventListener("message", function(event) {
    // Verify the origin
    if (event.origin === "https://example.com") {
        console.log("Message received:", event.data);
    }
});
        </pre>
        <p>In this example, the <code>onmessage</code> event listener checks that the message originates from <code>https://example.com</code> before processing it, enhancing security.</p>

        <h3>Security Considerations</h3>
        <ul>
            <li>Always specify the target origin in <code>postMessage</code> to ensure messages are only sent to trusted domains.</li>
            <li>Verify the <code>event.origin</code> in the receiving window to confirm the message’s source.</li>
            <li>Only process messages if they come from expected sources, to prevent potential attacks.</li>
        </ul>

        <!-- Desktop Notifications Section -->
    </section>

    <section class="mb-5">
        <h2>Desktop Notifications</h2>
        <p>HTML5 provides a way to show notifications on the user’s desktop, even when the user is not actively looking at the webpage. This feature is commonly used for applications like email, social media, and messaging platforms to alert users of new messages or updates.</p>

        <h3>Using the Notifications API</h3>
        <p>The Notifications API allows web applications to display system notifications to the user. To show a notification, you need to request permission from the user first.</p>

        <h4>Requesting Permission</h4>
        <p>Before showing notifications, you need to check if the user has granted permission:</p>
        <pre>
if (Notification.permission === "granted") {
    // Permission granted
    new Notification("Hello! You have a new message.");
} else if (Notification.permission !== "denied") {
    Notification.requestPermission().then(permission => {
        if (permission === "granted") {
            new Notification("Thank you for enabling notifications!");
        }
    });
}
        </pre>
        <p>In this example, the code first checks if the user has already granted permission. If not, it requests permission, and if granted, displays a notification.</p>

        <h4>Creating a Notification</h4>
        <p>Once permission is granted, you can create a notification using the <code>Notification</code> constructor:</p>
        <pre>
const notification = new Notification("New Message", {
    body: "You have a new message from Alice!",
    icon: "icon.png"
});
        </pre>
        <p>This code creates a notification with a title ("New Message"), a body message ("You have a new message from Alice!"), and an icon.</p>

        <h3>Notification Options</h3>
        <p>The <code>Notification</code> constructor accepts various options to customize the appearance and behavior of notifications:</p>
        <ul>
            <li><code>body</code>: The main text message of the notification.</li>
            <li><code>icon</code>: URL of an icon image to display in the notification.</li>
            <li><code>image</code>: A larger image to show within the notification (where supported).</li>
            <li><code>requireInteraction</code>: If <code>true</code>, the notification remains on the screen until the user interacts with it.</li>
            <li><code>tag</code>: A unique identifier for the notification, which prevents duplicate notifications with the same tag.</li>
        </ul>

        <h4>Handling Notification Click Events</h4>
        <p>You can add an event listener for when the user clicks on a notification, allowing you to open a specific URL or perform other actions:</p>
        <pre>
notification.onclick = function(event) {
    event.preventDefault(); // Prevent the default action
    window.open("https://example.com/messages"); // Open URL in new tab
    notification.close(); // Close the notification
};
        </pre>
        <p>This example opens a URL in a new tab when the user clicks the notification, then closes the notification window.</p>

        <h3>Benefits and Use Cases of Desktop Notifications</h3>
        <ul>
            <li>Provide real-time alerts, enhancing user engagement and responsiveness.</li>
            <li>Useful for notifying users of time-sensitive events, like messages, updates, or reminders.</li>
            <li>Allow users to stay informed without constantly checking the webpage.</li>
        </ul>
    </section>
</main>


    </div>

    <!--Editable section ends-->
    <button id="openChatbot" class="chatbot-toggle" style="display: flex;">
        <img src="chatbotlogo.png" alt="Chatbot Logo" class="chatbot-logo">
    </button>

    <div id="chatbot" class="chatbot-container" style="display: none;">
        <div class="chatbot-header">
            <img src="chatbotlogo.png" alt="Chatbot Logo" class="chatbot-logo">
            <h3>Web Tech Assistant</h3>
            <button id="closeChatbot" class="btn-close" aria-label="Close"></button>
        </div>
        <div id="chatbotMessages" class="chatbot-messages"><div class="message bot"><p>Hello! I'm your Web Tech Assistant. How can I help you today?</p>
</div></div>
        <div class="chatbot-input">
            <textarea id="userInput" placeholder="Ask your doubt..." rows="3"></textarea>
            <button id="sendMessage" class="btn btn-primary">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script> <!-- Your existing JS file -->
    <script src="dark-mode.js"></script> <!-- Dark mode toggle JS -->
    <script src="chatbot.js"></script> <!-- Chatbot JS -->
    <script>
        // Theme switcher event listener
        const darkModeToggle = document.getElementById('darkModeToggle');
        const body = document.body;

        darkModeToggle.addEventListener('change', () => {
            body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', body.classList.contains('dark-mode'));
        });

        // Set dark mode from local storage if it was previously enabled
        if (localStorage.getItem('darkMode') === 'true') {
            body.classList.add('dark-mode');
            darkModeToggle.checked = true;
        }

        function runCode() {
            const htmlCode = document.getElementById('htmlCode').value;
            const iframe = document.getElementById('livePreview');
            iframe.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(htmlCode);
        }

        function runPlayground() {
            const playgroundHtml = document.getElementById('playgroundHtmlCode').value;
            const playgroundIframe = document.getElementById('playgroundPreview');
            playgroundIframe.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(playgroundHtml);
        }

    </script>

</body></html>
